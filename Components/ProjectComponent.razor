@namespace PlannerApp.Components
@using PlannerApp.Database.Models
@using PlannerApp.Database
@inject NavigationManager navigation

<MudCard Outlined="true" onclick="@GoToTask">
    <MudCardHeader>
        <CardHeaderContent>
             <div class="d-flex align-center justify-space-around" onclick="@Edit">
               
                @if(editflag)
                {
                    <MudTextField @bind-Value="@ProjectName" Variant="Variant.Outlined"></MudTextField>
                    <MudFab Icon="@Icons.Material.Outlined.Check" Size="Size.Small" DisableElevation="true"></MudFab>
                    <MudFab Icon="@Icons.Material.Outlined.Close" Size="Size.Small" DisableElevation="true" OnClick="CloseEdit"></MudFab>
                }   
                else{
                    <MudText Typo="Typo.h6">@project.ProjectName</MudText>
                }

                

            </div>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent>
       <MudText Typo="Typo.body2">@project.ProjectDescription</MudText> 
    </MudCardContent>
</MudCard>

@code{
    [Parameter]
    public PlannerApp.Database.Models.Project project {get;set;} = new PlannerApp.Database.Models.Project();

    public string ProjectName {get;set;} = string.Empty;
    public bool editflag {get;set;} = false;

        protected override void OnInitialized()
        {
           ProjectName = project.ProjectName;
        }

    public void Edit()
    {
        editflag = true;
    }

    public void GoToTask()
    {
        if(editflag == false)
        {
            navigation.NavigateTo($"/tasks/{project.ProjectId}");
        }
    }

    public void CloseEdit(){
        editflag = false;
    }
    
     
}